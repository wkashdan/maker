!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("../../components/Skeleton"),require("../../components/Theme"),require("../../components/TransitionFadeIn"),require("../../utils/css-validator"),require("lodash/throttle"));else if("function"==typeof define&&define.amd)define(["../../components/Skeleton","../../components/Theme","../../components/TransitionFadeIn","../../utils/css-validator","lodash/throttle"],t);else{var s="object"==typeof exports?t(require("../../components/Skeleton"),require("../../components/Theme"),require("../../components/TransitionFadeIn"),require("../../utils/css-validator"),require("lodash/throttle")):t(e["../../components/Skeleton"],e["../../components/Theme"],e["../../components/TransitionFadeIn"],e["../../utils/css-validator"],e["lodash/throttle"]);for(var o in s)("object"==typeof exports?exports:e)[o]=s[o]}}(this,(function(e,t,s,o,i){return(()=>{var n={89:function(e){e.exports=function(){"use strict";var e=function(e){var t=e.props,s=e.data,o=e.parent,i=function e(t){return Array.isArray(t)?(s=t=>e(t),t.reduce(((e,t)=>e.concat(s(t))),[])):null!==(o=t)&&"object"==typeof o?function(e){let t=[];for(const s in e)e[s]&&t.push(s);return t}(t):"string"==typeof t&&t?[t]:[];var s,o}([s.staticClass,s.class]);if(i){var n,a,r,l=(a=(n=t).body,r=n.document,a?window.document.body:!!r&&window.document.documentElement);if(l){var d=function(e,t){if(!t.length)return;const{classList:s}=e;return t.filter((e=>{if(!s.contains(e))return s.add(e),!0}))}(l,i),h=function(){!function(e,t){if(!t||!t.length)return;let s;for(;s=t.shift();)e.classList.remove(s);e.classList.length||e.removeAttribute("class")}(l,d)};o.$once("hook:beforeUpdate",h),o.$once("hook:destroyed",h)}}},t=Object.prototype.hasOwnProperty,s=function(e,t,s){var o="&"===t[0],i="~"===(t=o?t.slice(1):t)[0],n="!"===(t=i?t.slice(1):t)[0];return{o:e,t:t=n?t.slice(1):t,i:s,u:{once:i,capture:n,passive:o}}},o=function(e){var o,i,n,a=e.props,r=e.listeners,l=e.parent,d=function(e,o){var i,n,a=[];for(var r in o)if(i=o,n=r,t.call(i,n)){var l=o[r],d=s(e,r,l);d.o.addEventListener(d.t,d.i,d.u),a.push(d)}return a}((i=(o=a).body,n=o.document,i?window.document.body:n?window.document:window),r),h=function(){!function(e){for(var t;t=e.shift();)t.o.removeEventListener(t.t,t.i,t.u)}(d)};l.$once("hook:beforeUpdate",h),l.$once("hook:destroyed",h)},i=function(t){o(t),e(t)};return{name:"pseudo-window",functional:!0,props:{document:Boolean,body:Boolean},render:function(e,t){return t.parent._isMounted?i(t):t.parent.$once("hook:mounted",(function(){i(t)})),t.slots().default}}}()},78:t=>{"use strict";t.exports=e},219:e=>{"use strict";e.exports=t},403:e=>{"use strict";e.exports=s},948:e=>{"use strict";e.exports=o},400:e=>{"use strict";e.exports=i}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var s=a[e]={exports:{}};return n[e].call(s.exports,s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};return(()=>{"use strict";r.r(l),r.d(l,{MImage:()=>g});var e=r(400),t=r.n(e),s=r(89),o=r.n(s),i=r(403),n=r(78),a=r(219),d=r(948),h=r.n(d);function c(){const e=new WeakMap,t=new IntersectionObserver((t=>{t.forEach((t=>{var s;return null===(s=e.get(t.target))||void 0===s?void 0:s(t)}))}));return{watch(s,o){e.set(s,o),t.observe(s)},unwatch(s){t.unobserve(s),e.delete(s)}}}let u;const m={components:{PseudoWindow:o(),MTransitionFadeIn:i.MTransitionFadeIn,MSkeletonBlock:n.MSkeletonBlock},inject:{theme:{default:(0,a.defaultTheme)(),from:a.MThemeKey}},inheritAttrs:!1,props:{src:{type:String,default:void 0},srcset:{type:String,default:void 0},sizes:{type:String,default:void 0},shape:{type:String,default:void 0,validator:e=>["original","square","circle","arch","hexagon"].includes(e)},lazyload:{type:Boolean,default:!1},objectFit:{type:String,validator:h()("object-fit"),default:"cover"},objectPosition:{type:String,validator:h()("object-position"),default:"center"},shouldDisableTransition:{type:Boolean,default:!1},shouldUseStaticSizeStyles:{type:Boolean,default:!1},staticHeight:{type:Number,default:0},staticWidth:{type:Number,default:0}},data(){return{shouldLoad:!1,loaded:!1,throttledResizeHandler:()=>{t()(this.getImageDimensions,200),console.log("throttle called")},height:0,width:0,getImageDimensionsFnAttemptsLeft:20,getImageDimensionsTimeout:void 0}},computed:{...(0,a.resolveThemeableProps)("image",["shape"]),calculatedSrc(){return this.shouldLoad?this.src:""},calculatedSrcSet(){return this.shouldLoad?this.srcset:""},imageWrapperStyles:()=>({"--maker-image-hexagon":"polygon(50% 0, 93.3012701892219% 25%, 93.3012701892219% 75%, 50% 100%, 6.69872981077807% 75%, 6.69872981077807% 25%)"}),style(){const e={"--image-height":"".concat(this.height,"px"),"--image-object-fit":this.objectFit,"--image-object-position":this.objectPosition};return this.shouldUseStaticSizeStyles&&this.height&&this.width&&(e.height="".concat(this.height,"px"),e.width="".concat(this.width,"px")),e},isThumbnail(){return this.width<"150"},shouldGetImageDimensions(){return this.shouldUseStaticSizeStyles||"square"!==this.shape&&"original"!==this.shape}},watch:{src:"load",srcset:"load",shape:{immediate:!0,handler(){console.log("props in watch: ",this.shouldGetImageDimensions,this.height,this.width),!this.shouldGetImageDimensions||this.height&&this.width||(console.log("about to call image dimensions from shape watcher"),this.$nextTick((()=>this.getImageDimensions())))}}},created(){this.staticHeight&&(this.height=this.staticHeight),this.staticWidth&&(this.width=this.staticWidth)},mounted(){var e;((this.loaded||this.shouldDisableTransition)&&this.$emit("image:visible"),this.lazyload)?(null!==(e=u)&&void 0!==e||(u=new c),u.watch(this.$el,(({isIntersecting:e})=>{e&&this.load()}))):this.load();const t=()=>{console.log("calling image dimensions in timeout function"),this.getImageDimensions(),this.getImageDimensionsFnAttemptsLeft-=1,0!==this.getImageDimensionsFnAttemptsLeft&&(this.height&&this.width||(this.getImageDimensionsTimeout=setTimeout(t,100)))};console.log("props in mounted:",this.shouldGetImageDimensions,this.height,this.width),!this.shouldGetImageDimensions||this.height&&this.width||(console.log("about to set the get image timeout in mounted"),this.$nextTick(t))},beforeDestroy(){var e;null===(e=u)||void 0===e||e.unwatch(this.$el),clearTimeout(this.getImageDimensionsTimeout)},methods:{load(){var e;this.shouldLoad=!0,null===(e=u)||void 0===e||e.unwatch(this.$el)},getImageDimensions(){var e,t;console.log("get image dimensions called"),this.height=(null===(e=this.$el)||void 0===e?void 0:e.offsetHeight)||0,this.width=(null===(t=this.$el)||void 0===t?void 0:t.offsetWidth)||0},afterEnter(){this.$emit("image:visible")},onLoaded(){this.loaded=!0,console.log("on loaded: ",this.shouldGetImageDimensions,this.height,this.width),!this.shouldGetImageDimensions||this.height&&this.width||(console.log("about to call get image dimensions in on loaded"),this.$nextTick((()=>this.getImageDimensions())))}}},p={ImageWrapper:"ðŸ“š0-0-0-semantic-releaseemJCV",Image:"ðŸ“š0-0-0-semantic-releasej_xX0",thumbnail:"ðŸ“š0-0-0-semantic-release_7QZj",shape_square:"ðŸ“š0-0-0-semantic-releaseNojeF",shape_circle:"ðŸ“š0-0-0-semantic-releaseN3kcV",shape_arch:"ðŸ“š0-0-0-semantic-release_3RYa",shape_hexagon:"ðŸ“š0-0-0-semantic-releaseVd_9P"};const g=function(e,t,s,o,i,n,a,r){var l,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=s,d._compiled=!0),o&&(d.functional=!0),n&&(d._scopeId="data-v-"+n),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=l):i&&(l=r?function(){i.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(d.functional){d._injectStyles=l;var h=d.render;d.render=function(e,t){return l.call(t),h(e,t)}}else{var c=d.beforeCreate;d.beforeCreate=c?[].concat(c,l):[l]}return{exports:e,options:d}}(m,(function(){var e,t,s=this,o=s.$createElement,i=s._self._c||o;return i("div",{class:s.$s.ImageWrapper,style:s.imageWrapperStyles},[s.loaded?s._e():i("m-skeleton-block",{class:[s.$s.Image,s.$s["shape_"+s.resolvedShape]]}),s._v(" "),s.shouldDisableTransition?[i("img",s._g(s._b({directives:[{name:"show",rawName:"v-show",value:s.loaded,expression:"loaded"}],class:(e={},e[s.$s.Image]=!0,e[s.$s["shape_"+s.resolvedShape]]=s.resolvedShape,e[s.$s.thumbnail]=s.isThumbnail,e),style:s.style,attrs:{srcset:s.calculatedSrcSet,sizes:s.sizes,src:s.calculatedSrc},on:{load:s.onLoaded}},"img",s.$attrs,!1),s.$listeners))]:i("m-transition-fade-in",{on:{"after-enter":s.afterEnter}},[i("img",s._g(s._b({directives:[{name:"show",rawName:"v-show",value:s.loaded,expression:"loaded"}],class:(t={},t[s.$s.Image]=!0,t[s.$s["shape_"+s.resolvedShape]]=s.resolvedShape,t[s.$s.thumbnail]=s.isThumbnail,t),style:s.style,attrs:{srcset:s.calculatedSrcSet,sizes:s.sizes,src:s.calculatedSrc},on:{load:s.onLoaded}},"img",s.$attrs,!1),s.$listeners))]),s._v(" "),i("pseudo-window",{on:{resize:s.throttledResizeHandler}})],2)}),[],!1,(function(e){this.$s=p.locals||p}),null,null).exports})(),l})()}));
//# sourceMappingURL=script.js.map